version: '3.8'

services:

  bookstack:
    image: ${BOOKSTACK_IMAGE:-solidnerd/bookstack:latest}
    environment:
      - DB_HOST=bookstack-db:3306
      - DB_DATABASE=dbuser
      - DB_USERNAME=dbuser
      - DB_PASSWORD=dbpass
      - APP_URL=${APP_URL:-http://localhost:8248}
      - REVISION_LIMIT=false
      - APP_KEY=APP_KEY
      - APP_TIMEZONE=America/Vancouver
    volumes:
      - "/etc/timezone:/etc/timezone:ro"
      - ./data/uploads:/var/www/bookstack/public/uploads
      - ./data/storage:/var/www/bookstack/storage/uploads
      - ./config/php.ini:/usr/local/etc/php/php.ini
